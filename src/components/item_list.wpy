<template>
    <view wx:for="{{renderData}}" @tap.stop="goToDetail" wx:key="{{id}}" data-id="{{item.id}}" class="item-list-wrapper">
        <view class="item-list-pic">
            <image src="{{item.pic}}" mode="scaleToFill" />
        </view>
        <view class="item-list-infoWrapper">
            <view class="item-list-title">{{item.title}}</view>
            <view class="item-list-intro">
                <view class="item-list-author">{{item.author || "天源运动健身学院"}}</view>
                <view class="item-list-time">{{item.time}}</view>
            </view>
        </view>
    </view>
</template>
<script>
import wepy from 'wepy';
import tip from '@/utils/tip';
import api from '@/api/api';
import { SYSTEM_INFO, USER_SPECICAL_INFO } from '@/utils/constant';

export default class Itemlist extends wepy.component {
  props = {
    renderData: {
      type: Array,
      default: []
    },
    type: {
      type: String,
      default: 'news'
    }
  };

  async onLoad() {
    const type = this.type;
    const { data } = await api[`get${type}List`]();
    this.renderData = data;
    this.$apply();
  }

  methods = {
    goToDetail(e) {
      const { currentTarget: { dataset } } = e;
      const id = dataset.id;
      wepy.navigateTo({
        url: '/pages/' + this.type.toLowerCase() + 'detail?id=' + id
      });
    }
  };
}
</script>
<style lang="scss">
.container {
  background: white;

  .item-list-wrapper {
    display: flex;
    height: 200rpx;
    align-items: center;
    border-bottom: 1px solid #e6e8eb;

    .item-list-pic {
      height: 150rpx;
      width: 250rpx;
      position: relative;
      margin-left: 15rpx;

      image {
        width: 100%;
        height: 100%;
      }
    }

    .item-list-infoWrapper {
      flex: 1;
      margin-left: 15rpx;
      height: 100%;
      display: flex;
      flex-direction: column;
      justify-content: space-around;

      .item-list-title {
        font-weight: 600;
        margin-bottom: 0.25rem;
        color: #3d464d;
      }

      .item-list-intro {
        display: flex;
        align-items: center;
        justify-content: space-between;

        .item-list-author {
          font-size: 20rpx;
        }

        .item-list-time {
          font-size: 20rpx;
          margin-right: 15rpx;
        }
      }
    }
  }
}
</style>